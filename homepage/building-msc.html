<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN">
<html>
<head>
<meta http-equiv="Content-Language" content="en-us">
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<link rel="stylesheet" href="main.css" type="text/css">
<style type="text/css">
.menu-building-msc { font-weight: bold }
</style>

<title>wxHaskell - Building - Visual C++</title>
</head>

<body>
<div id="body">

<div class="menu">
  <ul>
  <li><a class="menu-index" href="index.html">home</a></li>
  <li><a class="menu-screenshots" href="screenshots.html">screenshots</a>
      <ul>
      <li><a class="menu-samples" href="samples.html">samples</a></li>
      <li><a class="menu-applications" href="applications.html">applications</a></li>
      </ul>
  </li>
  <li><a class="menu-documentation" href="http://haskell.org/haskellwiki/WxHaskell/Documentation">documentation</a>
          <ul>
          <li><a class="menu-documentation-license" href="http://haskell.org/haskellwiki/WxHaskell/License">license</a></li>
          <li><a class="menu-documentation-quickstart" href="http://haskell.org/haskellwiki/WxHaskell/Quickstart">quick start</a></li>
          <li><a class="menu-documentation-faq" href="http://haskell.org/haskellwiki/WxHaskell/FAQ">faq</a></li>
          </ul>
  </li>
  <li><a class="menu-download" href="http://haskell.org/haskellwiki/WxHaskell/Download">download</a></li>
  </ul>
</div>
<div class="menu">
  <ul>
  <li><a class="menu-building" href="http://haskell.org/haskellwiki/WxHaskell/Building">building</a>
          <ul>
          <li><a class="menu-building-cygwin" href="http://haskell.org/haskellwiki/WxHaskell/Building_on_Cygwin">cygwin</a></li>
          <li><a class="menu-building-msc" href="http://haskell.org/haskellwiki/WxHaskell/Building_on_Windows">msc</a></li>
          <li><a class="menu-building-macosx" href="http://haskell.org/haskellwiki/WxHaskell/Building_on_MacOS_X">macosx</a></li>
          </ul>
  </li>
  <li><a class="menu-development" href="http://haskell.org/haskellwiki/WxHaskell/Development">development</a></li>
  <li><a class="menu-contribute" href="http://haskell.org/haskellwiki/WxHaskell/Contribute">contribute</a></li>
<!-- <li><a class="menu-dev-download" href="dev-download.html">download</a></li> -->
  </ul>
</div>


<div class="text">
<h2>Building wxWidgets and <span class="lib">wxc</span> with Microsoft Visual C++</h2>

<p>The advantage of using Visual C++ is that the resulting libraries are smaller and faster
than the gnu compiled ones. Furthermore, the debug version provides for automatic detection
of memory leaks in the wxWidgets libraries and you get a warning when forgetting to deallocate
wxWidgets objects. The drawback is that the configure scripts are not used and you will need
to set some options manually.</p>

<p>If you want to use Visual C++ Express Edition, you must use Visual C++ 2008 Express Editions or higher. Because previous version requires <a href="http://msdn2.microsoft.com/express/aa700755.aspx">installing Microsoft Platform SDK</a> before building wxWidgets or wxHaskell.</p>

<p>We use the wxWidgets provided workspace directly:</p>
<ul>
<li><b>wxWidgets 2.4</b>: Open the <code>$wxwin/src/wxWidgets.dsw</code> workspace.
Select menu "<code>Build/Set active configuration</code>" and select "<code>wxWidgets - win32 release unicode</code>" to build the (static) library. After compilation, you can also select "<code>wxWidgets - win32 debug unicode</code>" to build
the debug version.</li>
<li><b>wxWidgets 2.6</b>: Open the <code>$wxwin/build/msw/wx.dsw</code> workspace. Select
menu "<code>Build/Batch build</code>" and select all configurations by using the mouse and the <code>shift</code> key,
when you click a marker, all configurations are deselected. Next you manually select the "Unicode Release" and "Unicode Debug" versions of all projects and press "Build". Afterwards, press "Save All" to save all your mouse clicking work :-)</li>
</ul>

<p>If you want to use  <a href="http://wxhaskell.sourceforge.net/doc/Graphics.UI.WXCore.Db.html">database access</a> and <a href="http://wxhaskell.sourceforge.net/doc/Graphics.UI.WXCore.OpenGL.html">openGL canvas</a>, you must edit <code>$wxwin/include/msw/setup.h</code>'s <code>#define wxUSE_* </code>(* is target feature name) from 0 to 1. </p>

<p>After building wxWidgets, you need to run <code>configure</code> for the wxHaskell library.</p>
<pre>
&gt; cd $wxhaskell
&gt; ./configure --with-msc
</pre>

<p>If you want to use the debug version of the library, use the <code>--wxc-libname</code> option too.</p>
<pre>
&gt; ./configure --with-msc --wxc-libname=wxcd
</pre>

<p>After configuration, first run <code>make</code> command to generate stc_gen.* files.</p>
<pre>
&gt; make
</pre>

<p>Make will stop by following error.</p>
<pre>
> make: *** No rule to make target `out/wxc/wxc-msw2.6.4-0.10.1.dll', needed by `wxc'.  Stop.
</pre>

<p>Then go <code>$wxhaskell/wxc</code> directory. Here, you need to adapt the <code>wxc-<em>version</em>.dsp</code> project to reference the correct wxWidgets directory. Open the <code>.dsp</code> file in an editor and replace all occurrences of "<code>..\..\wxWindows-2.4.2</code>" (or "<code>..\..\wxWindows-2.6.4</code>") or by the installed wxWidgets directory, i.e. <code>$wxwin</code>.
</p>

<p>After adapting the project file, you can open the workspace <code>wxc/wxc-<em>version</em>.dsw</code>
and build the release and debug versions of the C wrapper library (if you use wxWidgets 2.6.4, you must choose
"Unicode Release" or "Unicode Debug" instead of choosing just "Release" or "Debug").</p>

<p>And finally! &ndash; you can run <code>make</code> in the <code>$wxhaskell</code> directory to build the
Haskell libraries.</p>
<pre>
&gt; cd $wxhaskell
&gt; make
&gt; make install
&gt; make wx
&gt; make wx-install
</pre>

</div>

<div class="status">
<a style="float: right" href="#body">top</a>last update: "Aug  18 2007".
</div>

</div>
</body>
</html>
